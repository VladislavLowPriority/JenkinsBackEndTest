   version: '3.8'
   services:
     app:
       build: .
       ports:
         - '5000:5000'
       environment:
         - PORT=5000
         - DB_HOST=db  # Используйте имя сервиса базы данных
         - DB_USER=postgres
         - DB_PASS=password
         - DB_NAME=online_store
       depends_on:
         - db  # Убедитесь, что база данных запускается первой

     db:  # Добавьте секцию базы данных
       image: postgres:latest
       environment:
         - POSTGRES_USER=postgres
         - POSTGRES_PASSWORD=password
         - POSTGRES_DB=online_store
       ports: 
         - '5432:5432'  # Необязательно, если не требуется доступ извне Docker
       volumes:
         - pgdata:/var/lib/postgresql/data

   volumes:
     pgdata: 